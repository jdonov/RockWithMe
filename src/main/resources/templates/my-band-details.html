<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:object="${myBand}">
    <p th:text="*{name}"></p>
    <th:block th:unless="*{events.isEmpty()}">
        <th:block th:each="e : *{getEvents()}">
            <span th:text="${e.getEventCategory()}"> </span>
            <span th:text="|Date: ${#temporals.format(e.getEventDate(), 'dd-MMM-yyyy HH:mm')}|"></span>
            <a th:href="@{/bands/events/update(id=${e.id})}">Update event</a>
            <form th:action="@{/bands/events/cancel/{id}(id=${e.id})}" method="POST">
                <input type="submit" value="Cancel event">
            </form>
            <div>
                <span th:text="${e.description}"></span>
            </div>
        </th:block>
    </th:block>
    <th:block th:each="r : ${myBand.requests}" th:object="${r}">
        <div>
            <a th:href="@{/users/details(id=${r.getUserId()})}">
                <span th:text="|Player username: *{username} |"></span>
                <th:block th:unless="*{isBecomeProducer()}">
                    <span th:text="|Applies for *{instrument} |"></span>
                </th:block>
                <th:block th:if="*{isBecomeProducer()}">
                    <span>Wants to become a producer</span>
                </th:block>
                <span th:text="*{isClosed()} ? 'The request is closed!' : 'The request is open!'"></span>
            </a>
            <th:block th:unless="*{isClosed()}">
                <form th:action="@{/bands/add/{request}(request=${r.id})}" th:method="POST">
                    <input type="radio" id="addMember" name="addMember" value="true">
                    <label for="addMember">Approve</label>
                    <input type="radio" id="rejectMembership" name="addMember" value="false">
                    <label for="rejectMembership">Reject</label>
                    <button type="submit">Confirm</button>
                </form>
            </th:block>
        </div>
    </th:block>
    <div>
        <a th:href="@{/bands/events/create(bandId=*{id})}">Create event</a>
    </div>
</div>

</body>
</html>